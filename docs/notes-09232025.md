# Project goal

Test Github Spec Kit with codex-cli + claude

## Background 
1. 由Lamira 提供的html source code, 我沒有完整的PRD
2. 透過ChatGPT產生PRD

## Development Flow
1. claude (Plaing / PRD)
/specify `PRD content from ChatGPT`
/plan

2. codex-cli (Coding)
- 將 .claude/commands/tasks.md copy to ~/.codex/prompts/tasks.md
/tasks
- 在codex-cli 中, 我沒有直接 /implement, 而是直接告訴它 "開始實作"

## Deploy to GCP Cloud Run
- claude 下, 我直接用/tasks 提出需求, 產生Dockerfile and deploy_cloudrun.md
- 經過Copilot (Sonnect 4) review之後發現 先前產生的Dockerfile 內容有小錯, 所以我手動更改Dockerfile, 並寫deploy_cloudrun_cmd.md



## Fix bugs / issues
### claude (fix bugs)
- 透過ChatGPT 寫出issue and plan prompts (因為花了一些時間在描述畫面的問題, 也許用WindSurf 更好)
- ChatGPT reivew 我提供的, 確認spec.md 沒有詳細描述我希望的UI互動方式
    - screenshot
    - 我描述的issues
    - spec.md
- 考量
    - 修改原有的spec.md, 但我沒需要整個重寫codes
    - 不確定像這樣的issues 算不算bugs? 該把issues 寫在哪裡? 還是merge 到spec.md
- 最後讓ChatGPT 指出在spec.md中的問題, 並將issues 提出, 產生plan prompts, 我直接將the prompts貼到 /plan 後.

### ==== /plan prompts ====
/plan

Context  
We have an existing app with a spinning wheel feature. The current implementation has a 5-segment color wheel, arrow rotates together with the wheel, and no text labels on segments. We want to fix this to improve UX and match the intended lottery mechan- ism.

Revised Spec Requirements  
- FR-001 (revised):  
  The system must display a **five-segment wheel**, each corresponding to one CVC rime: **-at, -og, -ip, -et, -ub**. Each segment must display its rime text label **centered inside the segment**, with sufficient readability across standard viewports (contrast ≥ 4.5:1; no clipping or overlap).  

- FR-002 (revised):  
  When the user presses **Spin!**, only the wheel rotates (the arrow remains fixed at the 12-o’clock position). The wheel spins for **2-3 seconds** with an ease-out animation. When spinning stops, the segment under the arrow is the selected rime. Selection probability among the five segments must be approximately uniform (deviation ≤ 1%).

New Requirements to Add  
- FR-011 (new):  
  Once a rime is selected, the landing segment should enter a highlight state (e.g. glowing border or scale up to ~1.05×) for **at least 800 ms**; within **1 second** of spin stopping, the corresponding question card (emoji + 3-choice) must appear.  

- FR-012 (new):  
  During spinning animation, **all user interactions are disabled** (Spin button disabled; other choice buttons inactive) until the result is finalized.  

- FR-013 (new):  
  The list of rimes is configurable. Default value is **[-at, -og, -ip, -et, -ub]**. If changed, the wheel auto-renders the corresponding number of segments, labels them, ensures equal segment sizes, and selection fairness remains (within tolerance).

Technical & UI Design Considerations  
- Segments: implement with scalable vector graphics (SVG) or canvas for crisp edges; ensure text label sizing adapts responsively.  
- Arrow: separate layer; fixed position.  
- Spin mapping: spin logic must map random pick → target segment under arrow.  
- Animation: ease-out curve; multiple full rotations + small randomized extra to land in target wedge.  
- Highlight: CSS class or state to trigger the visual change; remove when next spin starts.  
- Disable controls: manage UI state so no button is clickable during spin.  
- Testing: unit tests for segment mapping, probability distribution; end-to-end test for UI behavior (spin, highlight, display card).  

Deliverables  
1. Updated `spec.md` with revised FR-001 & FR-002, plus newly added FR-011-FR-013.  
2. Updated wheel component code (UI/animation/state) to satisfy above specs.  
3. Automated tests (unit + E2E) covering spin behavior, highlight, disable state.  
4. Migration / update notes ensuring existing game flows continue, no API breaking changes to question or choice logic.

Acceptance Criteria  
- Wheel shows 5 labeled segments (-at / -og / -ip / -et / -ub), text readable in common window sizes.  
- Arrow is fixed; only wheel rotates; stopping under arrow picks the result.  
- Chosen segment highlighted ≥ 800 ms; question card visible within 1 second after spin ends.  
- During spin, all interactive controls disabled; re-enabled after result is shown.  
- Fairness: across ≥1,000 simulated spins, each segment’s selection frequency within ±1% of 20%.  

Risks & Edge Cases  
- Boundary detection when spin ends exactly on wedge border: ensure deterministic or randomized resolution.  
- UI on small screens: text size, wedge shape, preventing overlap.  
- Animation performance on lower-end devices; ensure no jank.  
- Accessibility: screen reader announcements; contrast; keyboard/tab control of buttons.








