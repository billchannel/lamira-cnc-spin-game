# CVC Spin Game PRD（Revised）

## 產品概述
- 單頁式、完全前端的幼兒 CVC（Consonant-Vowel-Consonant）拼讀練習遊戲，可於瀏覽器直接開啟、離線執行。
- 核心互動採「旋轉轉盤 + 單題三選一」設計，玩家點擊 `Spin!` 後會看到輪盤動畫與隨機題目，藉由判讀 emoji 提示選出正確單字。
- 遊戲會以代幣（token）視覺化玩家的累積成就，鼓勵重複練習與自我挑戰。

## 產品目標與成功指標
- **學習目標**：協助 5–7 歲兒童透過視覺與聽覺（詞彙標示）聯想，提高 CVC 字彙辨識與拼讀準確率。
- **互動目標**：單次遊戲至少完成 8 次轉盤互動，整體答對率達到或超過 70%。
- **體驗目標**：頁面載入時間 < 1 秒（本機環境），動畫執行流暢，關鍵互動不出現阻塞或明顯延遲。

## 目標使用者
- **主要 persona**：已熟悉字母與基本發音規則的幼兒園（中、大班）與小學一年級學生。
- **次要 persona**：陪同指導的家長或教師，需要可快速上手、隨時重播的單字練習工具。

## 使用情境
1. 玩家開啟頁面，看見標題、輪盤與 `Spin!` 按鈕，題目區域預設為空白。
2. 點擊 `Spin!` 後：
   - `Spin!` 按鈕暫時禁用並轉為半透明，題目區出現「Spinning…」提示，選項清空且禁止操作。
   - 輪盤進行 2–3 圈動畫，指針固定在上方，輪盤自轉。
3. 動畫結束後約 200ms：
   - 題目區顯示 `Spin landed on -__!` 標題與對應 emoji 提示的問題 `What is this?`。
   - 生成 3 個文字選項按鈕並允許點擊。
4. 玩家選擇答案：
   - **正確**：跳出 `✅ Correct! You get a token!` alert、代幣計數 +1 並在 token 區加入金色圓點。
   - **錯誤**：跳出 `❌ Try again!` alert，題目維持原狀可重答。
5. 玩家可再次點擊 `Spin!` 進入下一題；除非重新整理，token 與當前題目會依基本流程維持狀態。

## 核心機制與邏輯
- **資料結構**：
  - `RIMES`: `['-at', '-og', '-ip', '-et', '-ub']`。
  - `WORDS`: 針對每個 rime 提供 3 組 `{ word, emoji }` 物件；目前資料如下：

    | 尾音 | 單字組合 | Emoji |
    | --- | --- | --- |
    | `-at` | `cat`, `bat`, `hat` | `🐱`, `🦇`, `🎩` |
    | `-og` | `dog`, `log`, `jog` | `🐶`, `🪵`, `🏃` |
    | `-ip` | `lip`, `sip`, `zip` | `👄`, `🥤`, `🧷` |
    | `-et` | `net`, `pet`, `jet` | `🎣`, `🐕`, `✈️` |
    | `-ub` | `sub`, `tub`, `cub` | `🚢`, `🛁`, `🐻` |

- **隨機與抽題**：
  - `onSpin()` 以等機率選擇 rime，並計算輪盤旋轉角度，保證指針落在該段區域。
  - `renderQuestion()` 使用 `pickRandom()` 取得正確答案，`renderChoices()` 以 Fisher–Yates 洗牌生成選項順序。
  - 按鈕點擊事件透過事件委派處理，確保後續擴充不需個別綁定。

- **遊戲狀態**：
  - `tokens`: 累計答對數；`renderTokens()` 以迴圈產 token DOM。
  - `currentRime`、`pendingRime`、`currentAnswer` 控制題目狀態；`isSpinning` 防止多次觸發。
  - 供除錯用的 `window.__gameState` 對外暴露即時狀態快照。

- **互動鎖定**：
  - 轉盤期間：`spinButton` disabled、`choices` 加上 `.is-disabled` class，防止提前作答。
  - 完成轉盤後才解除鎖定，並更新 `aria-label` 語音提示。

## 功能需求
- **F1**：頁面載入時初始化輪盤標籤、計數器與空白題目狀態。
- **F2**：`Spin!` 按下後必須：
  - 禁用按鈕 + 清空選項並顯示「Spinning…」。
  - 啟動輪盤動畫並更新 `data-active-rime`。
- **F3**：動畫結束後刷新題目區（標題 + emoji 問句 + 三個選項按鈕）。
- **F4**：玩家點選選項後判斷正誤：
  - 正確時：顯示成功 alert、代幣 +1、更新 token 視覺與計數文字。
  - 錯誤時：顯示失敗 alert，但保留原題，允許重答。
- **F5**：所有互動需支援無限次循環；除重新整理外，不自動重置 token。

## 非功能需求
- **N1**：採用純 HTML/CSS/Vanilla JS，無外部依賴，適合放在本地檔案或靜態伺服器。
- **N2**：程式碼維持可維護性：使用語意化函式命名（`renderQuestion`、`normalizeAngle` 等）並分離邏輯。
- **N3**：轉盤動畫使用 CSS transition，保持 2 秒內完成，手動運算角度確保結果一致。
- **N4**：token 區塊支援至少 20 枚代幣仍維持整齊排版（flex + wrap）。
- **N5**：支援 1024×768 以上桌面與平板；在寬度 < 640px 時進行縮放，保證輪盤與按鈕適配。

## UI/UX 指南
- **版面**：
  - 主容器最大寬度 600px，內容置中，背景色 `#fdf6e3`、主色 `#d2691e`。
  - 標題使用 2.25rem 字級並包含 emoji `🎡` 呼應遊戲主題。
- **輪盤**：
  - 直徑 300px（行動裝置 240px），外框 5px；使用五彩 `conic-gradient` 分區，指針為固定三角形。
  - 每段標籤以 JS 動態定位，需隨視窗更新位置以保持正向閱讀。
- **按鈕與選項**：
  - `Spin!` 為膠囊形狀按鈕，具 hover/active 狀態與禁用視覺。
  - 選項按鈕為 160px（行動 140px）寬矩形，hover 時變色與浮起 1px，提升可點擊感。
- **代幣呈現**：
  - 20px 金色圓點，具內陰影營造立體感；`Tokens: X` 文字同步更新。
- **文字內容**：題目標題 `Spin landed on <rime>!`、問題 `What is this?`，視覺與語音皆標示 rime 與單字。

## 無障礙與在地化
- 全站使用語意化標籤與 `aria-live` 區域，協助螢幕報讀。
- 轉盤容器在未旋轉/旋轉後分別提供 `aria-label` 描述當前狀態。
- Emoji 旁以 `aria-label` 註記英文單字，確保無法辨識表情符號的使用者可獲得資訊。
- 隨時可引入多語系字串（alert 文字集中在 `checkAnswer()`），後續可抽離至配置檔。

## 內容與擴充方向
- 可在 `WORDS` 增加更多單字或尾音，只需確保每組維持相同資料結構。
- 擴充想法：加入音效回饋、難度選單（CVCC/CCVC）、題目次數上限設定、結果摘要頁。
- 進階功能可利用現有 `window.__gameState` 為基礎，串接教學分析或家長儀表板。

## 數據與追蹤（選配）
- 可追蹤事件：`spin_started`、`spin_completed`（含 rime）、`answer_submitted`（含是否正確）、`token_earned`。
- 若需離線模式，確保分析工具具備緩存與上線後回傳的機制。

## 開放議題
- 是否需要在轉盤進行時加入音效或震動，以提高臨場感？
- Token 是否需顯示目標（例如 10 枚達成一局）或提供重置機制？
- 未來若支援手機直式介面，是否需提供輪盤收合或改為按鈕式題庫選擇？

